<div class="panel panel-default summary">
  <div class="panel-heading action-header">
    <span translate>Summary</span>
    <a class="btn btn-link" ng-click="applicationSummaryCtrl.editApp()">
      <i class="helion-icon helion-icon-Right_Arrow"></i>
      <span translate>Edit</span>
    </a>
  </div>

  <div class="row data-body">
    <div class="col-md-6">
      <dl class="dl-horizontal">

        <dd>
          <percent-gauge title="{{ 'Memory Utilization' | translate }}"
                         value="{{ appCtrl.model.application.stats.usage.mem / appCtrl.model.application.stats.mem_quota }}"
                         value-text="{{ [appCtrl.model.application.stats.usage.mem, appCtrl.model.application.stats.mem_quota] | usageBytes:0 }}" />
        </dd>

        <dd>
          <percent-gauge mode="instance"
                         title="{{ 'Instances' | translate }}"
                         value="{{ appCtrl.model.application.summary.running_instances / appCtrl.model.application.summary.instances }}"
                         value-text="{{ appCtrl.model.application.summary.running_instances }} / {{ appCtrl.model.application.summary.instances }}" />
        </dd>

        <dd>
          <percent-gauge title="{{ 'Disk Utilization' | translate }}"
                         value="{{ appCtrl.model.application.stats.usage.disk / appCtrl.model.application.stats.disk_quota }}"
                         value-text="{{ [appCtrl.model.application.stats.usage.disk, appCtrl.model.application.stats.disk_quota] | usageBytes }}" />
        </dd>

        <dt translate>STATE</dt>
        <dd class="pull-right app-status-block">
          <div ng-if="appCtrl.ready">
          <span class="app-status helion-icon {{ appCtrl.model.application.state.indicator | appStateIcon }}"></span>
          <span class="app-status">{{ appCtrl.model.application.state.label }}</span>
          </div>
        </dd>

        <dt translate>MODIFIED</dt>
        <dd class="pull-right">
          {{ appCtrl.model.application.summary.package_updated_at | date : 'M/d/yy h:mm:ss a' }}
        </dd>

      </dl>
    </div>
    <div class="col-md-6">
      <dl class="dl-horizontal">
        <dt translate>BUILDPACK</dt>
        <dd class="nowrap align-right">
          <span ng-if="!applicationSummaryCtrl.isWebLink(appCtrl.appBuildPack)">{{ appCtrl.appBuildPack }}</span>
          <a ng-if="applicationSummaryCtrl.isWebLink(appCtrl.appBuildPack)" target="buildpack" href="{{ appCtrl.appBuildPack }}">{{ appCtrl.appBuildPack }}</a>
        </dd>

        <dt translate>CLUSTER</dt>
        <dd class="pull-right">
          {{ applicationSummaryCtrl.getEndpoint() }}
        </dd>

        <dt translate>ORGANIZATION</dt>
        <dd class="pull-right">
          {{ appCtrl.model.application.organization.name }}
        </dd>

        <dt translate>SPACE</dt>
        <dd class="pull-right">
          {{ appCtrl.model.application.space.name }}
        </dd>
      </dl>
    </div>
  </div>
</div>

<div>
  <div class="action-header">
    <span translate>Service Instances</span>
    <a class="btn btn-link" ui-sref="cf.applications.application.services({guid: appCtrl.id})">
      <i class="helion-icon helion-icon-Right_Arrow"></i>
      <span translate>Manage Services</span>
    </a>
  </div>
  <div class="panel panel-default">
    <div class="panel-body"
      ng-if="!appCtrl.model.application.summary.services.length" translate>
      You have no service instances.
    </div>
    <table class="table table-actionable"
      ng-if="appCtrl.model.application.summary.services.length">
      <thead>
        <tr>
          <th translate>Name</th>
          <th translate>Service</th>
          <th translate>Plan</th>
          <!--
          <th translate>ENV.VARIABLES</th>
          -->
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="service in appCtrl.model.application.summary.services">
          <td>{{ service.name }}</td>
          <td>{{ service.service_plan.service.label }}</td>
          <td>{{ service.service_plan.name }}</td>
          <!--
          <td>
            <a class="icon-link" href="#" target="_blank"><i class="helion-icon helion-icon-Share"></i></a>
          </td>
          -->
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div>
  <div class="action-header">
    <span translate>Routes</span>
    <a class="btn btn-link" ng-click="applicationSummaryCtrl.showAddRouteForm()">
      <i class="helion-icon helion-icon-Right_Arrow" ></i>
      <span translate>Add routes</span>
    </a>
  </div>
  <div class="panel panel-default">
    <div class="panel-body"
      ng-if="!appCtrl.model.application.summary.routes.length" translate>
      You have no routes.
    </div>
    <table class="table table-actionable"
      ng-if="appCtrl.model.application.summary.routes.length" >
      <thead>
        <tr>
          <th translate>Route</th>
          <th translate>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="route in appCtrl.model.application.summary.routes track by applicationSummaryCtrl.routesService.getRouteId(route)">
          <td>{{ route.host + '.' + route.domain.name + route.path }}</td>
          <td>
            <actions-menu actions="applicationSummaryCtrl.routesActionMenu"
                            action-target="route"
                            menu-position="actions-menu-right"
                            menu-icon="helion-icon helion-icon-More"></actions-menu>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div>
  <div class="action-header">
    <span translate>Instances</span>
    <!--
    <a class="btn btn-link">
      <i class="helion-icon helion-icon-Right_Arrow"></i>
      <span translate>Add instances</span>
    </a>
    -->
  </div>
  <div class="panel panel-default">
    <div class="panel-body" ng-if="appCtrl.model.application.summary.running_instances === 0" translate>
      This application has no running instances.
    </div>
    <table class="table" ng-if="appCtrl.model.application.summary.running_instances > 0" >
      <thead>
        <tr>
          <th translate>Index</th>
          <th translate>Status</th>
          <th translate>Uptime</th>
          <th></th>
        </tr>
      </tr>
      </thead>
      <tbody>
        <tr ng-repeat="instance in appCtrl.model.application.instances" ng-show="$index < applicationSummaryCtrl.instanceViewLimit">
          <td>{{ $index }}</td>
          <td>{{ instance.state }}</td>
          <td>{{ applicationSummaryCtrl.formatUptime(instance.stats.uptime) }}</td>
          <td></td>
        </tr>
      </tbody>
      <tfoot ng-show="applicationSummaryCtrl.instanceViewLimit < appCtrl.model.application.instanceCount">
      <tr>
        <td colspan="4" class="text-center">
          <a ng-click="applicationSummaryCtrl.instanceViewLimit = appCtrl.model.application.instanceCount">
            <span translate>Show All</span> ({{appCtrl.model.application.instanceCount}})
          </a>
        </td>
      </tr>
      </tfoot>
    </table>
  </div>
</div>
